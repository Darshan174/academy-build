<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=https://cloud.layer5.io/academy/favicons/favicon.ico><link rel=apple-touch-icon href=https://cloud.layer5.io/academy/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=https://cloud.layer5.io/academy/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=https://cloud.layer5.io/academy/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://cloud.layer5.io/academy/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=https://cloud.layer5.io/academy/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=https://cloud.layer5.io/academy/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=https://cloud.layer5.io/academy/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=https://cloud.layer5.io/academy/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=https://cloud.layer5.io/academy/favicons/android-192x192.png sizes=192x192><title>Deploy a Sample Application | Layer5 Academy</title><meta name=description content="Meshery, collaborative Kubernetes manager"><meta property="og:url" content="https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/introduction-to-service-meshes/deploy-an-application/"><meta property="og:site_name" content="Layer5 Academy"><meta property="og:title" content="Deploy a Sample Application"><meta property="og:description" content="Meshery, collaborative Kubernetes manager"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="learning-paths"><meta itemprop=name content="Deploy a Sample Application"><meta itemprop=description content="Meshery, collaborative Kubernetes manager"><meta itemprop=wordCount content="632"><meta name=twitter:card content="summary"><meta name=twitter:title content="Deploy a Sample Application"><meta name=twitter:description content="Meshery, collaborative Kubernetes manager"><link rel=preload href=https://cloud.layer5.io/academy/scss/main.min.8d61368d36274adb6675933a7937cfa090b823abdb581eede811dfeab0c3628e.css as=style integrity="sha256-jWE2jTYnSttmdZM6eTfPoJC4I6vbWB7t6BHf6rDDYo4=" crossorigin=anonymous><link href=https://cloud.layer5.io/academy/scss/main.min.8d61368d36274adb6675933a7937cfa090b823abdb581eede811dfeab0c3628e.css rel=stylesheet integrity="sha256-jWE2jTYnSttmdZM6eTfPoJC4I6vbWB7t6BHf6rDDYo4=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-page><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="form-control td-search__input" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=https://cloud.layer5.io/academy/offline-search-index.f16c09dddb81ca89db2c4b5cb89e7f49.json data-offline-search-base-href=https://cloud.layer5.io/academy/ data-offline-search-max-results=10></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developers-li><a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developers><span>Mastering Service Meshes for Developers</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersintroduction-to-service-meshes-li><a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/introduction-to-service-meshes/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersintroduction-to-service-meshes><span>Introduction to Service Meshes</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersintroduction-to-service-meshesgetting-started-li><a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/introduction-to-service-meshes/getting-started/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersintroduction-to-service-meshesgetting-started><span>Getting Started with Istio</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersintroduction-to-service-meshesdeploy-an-application-li><a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/introduction-to-service-meshes/deploy-an-application/ class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersintroduction-to-service-meshesdeploy-an-application><span class=td-sidebar-nav-active-item>Deploy a Sample Application</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersintroduction-to-service-meshesexpose-services-li><a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/introduction-to-service-meshes/expose-services/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersintroduction-to-service-meshesexpose-services><span>Exposing services through Istio Ingress Gateway</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersintroduction-to-service-meshesobservability-li><a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/introduction-to-service-meshes/observability/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersintroduction-to-service-meshesobservability><span>Observability</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersintroduction-to-service-meshesrouting-and-canary-li><a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/introduction-to-service-meshes/routing-and-canary/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersintroduction-to-service-meshesrouting-and-canary><span>Request Routing and Canary Testing</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersintroduction-to-service-meshesfault-injection-li><a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/introduction-to-service-meshes/fault-injection/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersintroduction-to-service-meshesfault-injection><span>Fault Injection</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersintroduction-to-service-meshesmutual-tls-li><a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/introduction-to-service-meshes/mutual-tls/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersintroduction-to-service-meshesmutual-tls><span>Mutual TLS & Identity Verification</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersintroduction-to-service-meshescircuit-breaking-li><a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/introduction-to-service-meshes/circuit-breaking/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersintroduction-to-service-meshescircuit-breaking><span>Circuit Breaking</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersintroduction-to-service-meshesconclusion-li><a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/introduction-to-service-meshes/conclusion/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersintroduction-to-service-meshesconclusion><span>Conclusion</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersadvance-concepts-of-service-meshes-li><a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/advance-concepts-of-service-meshes/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersadvance-concepts-of-service-meshes><span>Advance Concepts of Service Meshes</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersadvance-concepts-of-service-meshesgetting-started-li><a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/advance-concepts-of-service-meshes/getting-started/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersadvance-concepts-of-service-meshesgetting-started><span>Getting Started with Istio</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersadvance-concepts-of-service-meshesdeploy-an-application-li><a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/advance-concepts-of-service-meshes/deploy-an-application/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersadvance-concepts-of-service-meshesdeploy-an-application><span>Deploy a sample application</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersadvance-concepts-of-service-meshesexpose-services-li><a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/advance-concepts-of-service-meshes/expose-services/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersadvance-concepts-of-service-meshesexpose-services><span>Expose services through Istio Ingress Gateway</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersadvance-concepts-of-service-meshesservice-security-capabilities-li><a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/advance-concepts-of-service-meshes/service-security-capabilities/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersadvance-concepts-of-service-meshesservice-security-capabilities><span>Service Security Capabilities of Istio</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersadvance-concepts-of-service-mesheswebassembly-and-intelligent-data-planes-li><a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/advance-concepts-of-service-meshes/webassembly-and-intelligent-data-planes/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersadvance-concepts-of-service-mesheswebassembly-and-intelligent-data-planes><span>WebAssembly and Intelligent Data Planes</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersadvance-concepts-of-service-meshesconclusion-li><a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/advance-concepts-of-service-meshes/conclusion/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersadvance-concepts-of-service-meshesconclusion><span>Conclusion</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersadvance-concepts-of-service-meshesobservability-li><a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/advance-concepts-of-service-meshes/observability/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-learning-paths11111111-1111-1111-1111-111111111111mastering-service-meshes-for-developersadvance-concepts-of-service-meshesobservability><span>Observability with Istio</span></a></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"></div></aside><main class="col-12 col-md-9 col-xl-8" role=main><div class="page-header d-flex justify-content-between align-items-center"><div class=breadcrumb-container><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=https://cloud.layer5.io/academy/learning-paths/>Learning Paths</a></li><li class=breadcrumb-item><a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/>Mastering Service Meshes for Developers</a></li><li class=breadcrumb-item><a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/introduction-to-service-meshes/>Introduction to Service Meshes</a></li><li class="breadcrumb-item active" aria-current=page>Deploy a Sample Application</li></ol></nav></div></div><div class=td-content data-bs-theme=dark><h1>Deploy a Sample Application</h1><div class=lead>Meshery, collaborative Kubernetes manager</div><header class=article-meta><p class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>&nbsp; 3 minute read &nbsp;</p></header><div class=chapter-content><p>To play with Istio and demonstrate some of it&rsquo;s capabilities, you will deploy the example BookInfo application, which is included the Istio package.</p><h3 id=what-is-the-bookinfo-application class=heading-link><strong>What is the Bookinfo Application</strong>
<a href=#what-is-the-bookinfo-application class=heading-anchor aria-label="Permalink to this heading">🔗</a></h3><br>This application is a polyglot composition of microservices are written in different
languages and sample BookInfo application displays information about a book, similar to a
single catalog entry of an online book store. Displayed on the page is a description of
the book, book details (ISBN, number of pages, and so on), and a few book reviews.<p>The end-to-end architecture of the application is shown in the figure.</p><p><div class=md__image><img id="[89 32 305 188 146 252]" src=https://cloud.layer5.io/academy/11111111-1111-1111-1111-111111111111/mastering-service-mesh/bookinfo-off-mesh.webp onclick=openModal(this.id) alt=book-info class=md-image-responsive></div></p><br>It’s worth noting that these services have no dependencies on Istio, but make an interesting
service mesh example, particularly because of the multitude of services, languages and versions
for the reviews service.<p>As shown in the figure below, proxies are sidecarred to each of the application containers.</p><p><div class=md__image><img id="[457 2 59 347 292 470]" src=https://cloud.layer5.io/academy/11111111-1111-1111-1111-111111111111/mastering-service-mesh/bookinfo-on-mesh.webp onclick=openModal(this.id) alt=book-info-on-mesh class=md-image-responsive></div></p><br>Sidecars proxy can be either manually or automatically injected into the pods. Automatic sidecar
injection requires that your Kubernetes api-server supports `admissionregistration.k8s.io/v1`
or `admissionregistration.k8s.io/v1beta1` or `admissionregistration.k8s.io/v1beta2` APIs. Verify
whether your Kubernetes deployment supports these APIs by executing:<div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>kubectl api-versions <span class=p>|</span> grep admissionregistration
</span></span></code></pre></div><p>If your environment <strong>does NOT</strong> supports either of these two APIs, then you may use <a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/introduction-to-service-meshes/deploy-an-application/#manual-sidecar-inj>manual sidecar injection</a> to deploy the sample app.</p><p>As part of Istio deployment in <a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/introduction-to-service-meshes/getting-started/>Previous chapter</a>, you have deployed the sidecar injector.</p><br>### **Deploying Sample App with Automatic sidecar injection**<br>Istio, deployed as part of this workshop, will also deploy the sidecar injector. Let us now
verify sidecar injector deployment.<div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>kubectl -n istio-system get configmaps istio-sidecar-injector
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>NAME                     DATA   AGE
</span></span><span class=line><span class=cl>istio-sidecar-injector   <span class=m>2</span>      9h
</span></span></code></pre></div><p>NamespaceSelector decides whether to run the webhook on an object based on whether the namespace for that object matches the <a href=https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#label-selectors>selector</a>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>kubectl get namespace -L istio-injection
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>NAME           STATUS    AGE       ISTIO-INJECTION
</span></span><span class=line><span class=cl>default        Active    1h        enabled
</span></span><span class=line><span class=cl>istio-system   Active    1h        disabled
</span></span><span class=line><span class=cl>kube-public    Active    1h
</span></span><span class=line><span class=cl>kube-system    Active    1h
</span></span></code></pre></div><p>Using Meshery, navigate to the Istio management page.</p><ol><li>Enter <code>default</code> in the <code>Namespace</code> field.</li><li>Click the (+) icon on the <code>Sample Application</code> card and select <code>BookInfo Application</code> from the list.</li></ol><p>This will do 3 things:</p><ol><li>Label <code>default</code> namespace for sidecar injection.</li><li>Deploys all the BookInfo services in the <code>default</code> namespace.</li><li>Deploys the virtual service and gateway needed to expose the BookInfo&rsquo;s productpage application in the <code>default</code> namespace.</li></ol><h3 class=chapter-sub-heading><a name=verify></a>Verify Bookinfo deployment{" "}</h3><ol><li>Verify that the deployments are all in a state of AVAILABLE before continuing.</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>watch kubectl get deployment
</span></span></code></pre></div><ol start=2><li>Choose a service, for instance <code>productpage</code>, and view it&rsquo;s container configuration:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>kubectl get po
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>kubectl describe pod productpage-v1-.....
</span></span></code></pre></div><ol start=3><li>Examine details of the services:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>kubectl describe svc productpage
</span></span></code></pre></div><p>Next, you will expose the BookInfo application to be accessed external from the cluster.</p><br>#### **Alternative: Manual installation**
Follow this if the above steps did not work for you<br><br><h5 id=label-namespace-for-injection class=heading-link><strong>Label namespace for injection</strong>
<a href=#label-namespace-for-injection class=heading-anchor aria-label="Permalink to this heading">🔗</a></h5><p>Label the default namespace with istio-injection=enabled</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>kubectl label namespace default istio-injection<span class=o>=</span>enabled
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>kubectl get namespace -L istio-injection
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>NAME           STATUS    AGE       ISTIO-INJECTION
</span></span><span class=line><span class=cl>default        Active    1h        enabled
</span></span><span class=line><span class=cl>istio-system   Active    1h        disabled
</span></span><span class=line><span class=cl>kube-public    Active    1h
</span></span><span class=line><span class=cl>kube-system    Active    1h
</span></span></code></pre></div><h5 id=deploy-bookinfo class=heading-link><strong>Deploy BookInfo</strong>
<a href=#deploy-bookinfo class=heading-anchor aria-label="Permalink to this heading">🔗</a></h5><br><p>Applying this yaml file included in the Istio package you collected in <a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/introduction-to-service-meshes/getting-started/>Getting Started</a> will deploy the BookInfo app in you cluster.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>kubectl apply -f samples/bookinfo/platform/kube/bookinfo.yaml
</span></span></code></pre></div><h5 id=deploy-gateway-and-virtual-service-for-bookinfo-app class=heading-link><strong>Deploy Gateway and Virtual Service for BookInfo app</strong>
<a href=#deploy-gateway-and-virtual-service-for-bookinfo-app class=heading-anchor aria-label="Permalink to this heading">🔗</a></h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>kubectl apply -f samples/bookinfo/networking/bookinfo-gateway.yaml
</span></span></code></pre></div><hr><br><h4 id=manual-sidecar-injection class=heading-link><strong>Manual Sidecar Injection</strong>
<a href=#manual-sidecar-injection class=heading-anchor aria-label="Permalink to this heading">🔗</a></h4><p>Use this only when Automatic Sidecar injection doesn&rsquo;t work</p><p>To do a manual sidecar injection we will be using <code>istioctl</code> command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>curl https://raw.githubusercontent.com/istio/istio/master/samples/bookinfo/platform/kube/bookinfo.yaml <span class=p>|</span> istioctl kube-inject -f - &gt; newBookInfo.yaml
</span></span></code></pre></div><p>Observing the new yaml file reveals that additional container Istio Proxy has been added to the Pods with necessary configurations:</p><pre tabindex=0><code>        image: docker.io/istio/proxyv2:1.3.0
        imagePullPolicy: IfNotPresent
        name: istio-proxy
</code></pre><p>We need to now deploy the new yaml using <code>kubectl</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>kubectl apply -f newBookInfo.yaml
</span></span></code></pre></div><p>To do both in a single command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>kubectl apply -f &lt;<span class=o>(</span>curl https://raw.githubusercontent.com/istio/istio/master/samples/bookinfo/platform/kube/bookinfo.yaml <span class=p>|</span> istioctl kube-inject -f -<span class=o>)</span>
</span></span></code></pre></div><p>Now continue to <a href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/introduction-to-service-meshes/deploy-an-application/#verify>Verify Bookinfo deployment</a>.</p></div><nav class="pagination-nav mt-5" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/introduction-to-service-meshes/getting-started/><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label><i class="fa fa-chevron-left"></i> Getting Started with Istio</div></a><a class="pagination-nav__link pagination-nav__link--next" href=https://cloud.layer5.io/academy/learning-paths/11111111-1111-1111-1111-111111111111/mastering-service-meshes-for-developers/introduction-to-service-meshes/expose-services/><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Exposing services through Istio Ingress Gateway <i class="fa fa-chevron-right"></i></div></a></nav></div><div style=margin-top:2rem></div></main></div></div></div><script src=https://cloud.layer5.io/academy/js/main.min.93a3bf75eba7f67cb62933bdc16aff4dc235ec3930d0090a0bdf2a9941f29237.js integrity="sha256-k6O/deun9ny2KTO9wWr/TcI17Dkw0AkKC98qmUHykjc=" crossorigin=anonymous></script><script defer src=https://cloud.layer5.io/academy/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=https://cloud.layer5.io/academy/js/tabpane-persist.js></script><div id=myModal class=modal><button class=modal-close onclick=closeModal()>close</button><div class=modal-cont><img class=modal-pic id=modalPic onclick=closeModal() style=max-width:100%;max-height:80vh;margin:auto alt=Modal-pic></div></div><script>function openModal(e){var t;typeof e=="string"?t=document.getElementById(e).src:e instanceof HTMLImageElement&&(t=e.src),t&&t.includes("#")&&(t=t.substring(0,t.indexOf("#"))),document.getElementById("modalPic").src=t,document.getElementById("myModal").style.display="block"}function closeModal(){document.getElementById("modalPic").src="",document.getElementById("myModal").style.display="none"}document.addEventListener("keydown",function(e){e.key==="Escape"&&closeModal()}),document.addEventListener("DOMContentLoaded",function(){var e,t=document.querySelectorAll("img");t.forEach(function(e){e.onclick=function(){e.dataset.modal!=="false"&&openModal(e)}}),e=document.getElementById("myModal"),e.addEventListener("click",function(){closeModal()})})</script></body></html>