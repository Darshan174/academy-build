<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=alternate type=application/json href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/creation/index.json><meta name=robots content="index, follow"><link rel="shortcut icon" href=https://cloud.layer5.io/academy/favicons/favicon.ico><link rel=apple-touch-icon href=https://cloud.layer5.io/academy/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=https://cloud.layer5.io/academy/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=https://cloud.layer5.io/academy/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://cloud.layer5.io/academy/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=https://cloud.layer5.io/academy/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=https://cloud.layer5.io/academy/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=https://cloud.layer5.io/academy/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=https://cloud.layer5.io/academy/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=https://cloud.layer5.io/academy/favicons/android-192x192.png sizes=192x192><title>Create a cluster | Layer5 Academy</title><meta name=description content="Build a 3-node kubeadm cluster from scratch."><meta property="og:url" content="https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/creation/"><meta property="og:site_name" content="Layer5 Academy"><meta property="og:title" content="Create a cluster"><meta property="og:description" content="Build a 3-node kubeadm cluster from scratch."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Create a cluster"><meta itemprop=description content="Build a 3-node kubeadm cluster from scratch."><meta itemprop=wordCount content="1146"><meta name=twitter:card content="summary"><meta name=twitter:title content="Create a cluster"><meta name=twitter:description content="Build a 3-node kubeadm cluster from scratch."><link rel=preload href=https://cloud.layer5.io/academy/scss/main.min.8d61368d36274adb6675933a7937cfa090b823abdb581eede811dfeab0c3628e.css as=style integrity="sha256-jWE2jTYnSttmdZM6eTfPoJC4I6vbWB7t6BHf6rDDYo4=" crossorigin=anonymous><link href=https://cloud.layer5.io/academy/scss/main.min.8d61368d36274adb6675933a7937cfa090b823abdb581eede811dfeab0c3628e.css rel=stylesheet integrity="sha256-jWE2jTYnSttmdZM6eTfPoJC4I6vbWB7t6BHf6rDDYo4=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-section><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="form-control td-search__input" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=https://cloud.layer5.io/academy/offline-search-index.f16c09dddb81ca89db2c4b5cb89e7f49.json data-offline-search-base-href=https://cloud.layer5.io/academy/ data-offline-search-max-results=10></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prep-li><a href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prep><span>Certified Kubernetes Administrator (CKA) Preparation</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentcertifications-li><a href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/certifications/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentcertifications><span>Certifications</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentcreation-li><a href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/creation/ class="align-left ps-0 active td-sidebar-link td-sidebar-link__section" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentcreation><span class=td-sidebar-nav-active-item>Create a cluster</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentworkload-li><a href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/workload/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentworkload><span>Workloads</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentscheduling-li><a href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/scheduling/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentscheduling><span>Scheduling Pods</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentnetworking-li><a href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/networking/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentnetworking><span>Networking</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentstorage-li><a href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/storage/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentstorage><span>Storage</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentsecurity-li><a href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/security/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentsecurity><span>Security</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontenttroubleshooting-li><a href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/troubleshooting/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontenttroubleshooting><span>Troubleshooting</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentoperations-li><a href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/operations/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentoperations><span>Operations</span></a></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"></div></aside><main class="col-12 col-md-9 col-xl-8" role=main><div class="page-header d-flex justify-content-between align-items-center"><div class=breadcrumb-container><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=https://cloud.layer5.io/academy/learning-paths/>Learning Paths</a></li><li class=breadcrumb-item><a href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/>Certified Kubernetes Administrator (CKA) Preparation</a></li><li class="breadcrumb-item active" aria-current=page>Create a cluster</li></ol></nav></div></div><div class=td-content><h1>Create a cluster</h1><div class=lead>Build a 3-node kubeadm cluster from scratch.</div><header class=article-meta><p class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>&nbsp; 6 minute read &nbsp;</p></header><p>This section guides you in creating of a 3-nodes Kubernetes cluster using <a href=https://kubernetes.io/docs/reference/setup-tools/kubeadm/>kubeadm</a> bootstrapping tool. This is an important step as you will use this cluster throughout this workshop.</p><p>The cluster you&rsquo;ll create is composed of 3 Nodes named <strong>controlplane</strong>, <strong>worker1</strong> and <strong>worker2</strong>. The controlplane Node runs the cluster components (API Server, Controller Manager, Scheduler, etcd), while worker1 and worker2 are the worker Nodes in charge of running the containerized workloads.</p><p><div class=md__image><img id="[494 99 269 338 303 107]" src=objectives.png onclick=openModal(this.id) alt=objectives class=md-image-responsive></div></p><h2 id=provisioning-vms class=heading-link>Provisioning VMs
<a href=#provisioning-vms class=heading-anchor aria-label="Permalink to this heading">🔗</a></h2><hr><p>Before creating a cluster, it&rsquo;s necessary to provision the infrastructure (bare metal servers or virtual machines). You can create the 3 VMs on your local machine or a cloud provider (but this last option will come with a small cost). Ensure you name those VMs <strong>controlplane</strong>, <strong>worker1</strong>, and <strong>worker2</strong> to keep consistency alongside the workshop. Please also ensure each VM has at least 2 vCPUs and 2G of RAM so it meets the <a href=https://bit.ly/kubeadm-prerequisites>prerequisites</a>.</p><p>If you want to create those VMs on your local machine, we recommend using <a href=https://multipass.run>Multipass</a>, a tool from <a href=https://canonical.com/>Canonical</a>. Multipass makes creating local VMs a breeze. Once you have installed Multipass, create the VMs as follows.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>multipass launch --name controlplane --memory 2G --cpus <span class=m>2</span> --disk 10G
</span></span><span class=line><span class=cl>multipass launch --name worker1 --memory 2G --cpus <span class=m>2</span> --disk 10G
</span></span><span class=line><span class=cl>multipass launch --name worker2 --memory 2G --cpus <span class=m>2</span> --disk 10G
</span></span></code></pre></div><p><div class=md__image><img id="[10 375 179 3 108 346]" src=step-1.png onclick=openModal(this.id) alt=step-1 class=md-image-responsive></div></p><h2 id=cluster-initialization class=heading-link>Cluster initialization
<a href=#cluster-initialization class=heading-anchor aria-label="Permalink to this heading">🔗</a></h2><hr><p>Now that the VMs are created, you need to install some dependencies on each on them (a couple of packages including <strong>kubectl</strong>, <strong>containerd</strong> and <strong>kubeadm</strong>). To simplify this process we provide some scripts that will do this job for you.</p><p>First, ssh on the controlplane VM and install those dependencies using the following command.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl https://luc.run/kubeadm/controlplane.sh <span class=p>|</span> <span class=nv>VERSION</span><span class=o>=</span><span class=s2>&#34;1.32&#34;</span> sh
</span></span></code></pre></div><p>Next, still from the controlplane VM, initialize the cluster.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo kubeadm init
</span></span></code></pre></div><p>The initialization should take a few tens of seconds. The list below shows all the steps it takes.</p><pre tabindex=0><code>preflight                     Run pre-flight checks
certs                         Certificate generation
  /ca                           Generate the self-signed Kubernetes CA to provision identities for other Kubernetes components
  /apiserver                    Generate the certificate for serving the Kubernetes API
  /apiserver-kubelet-client     Generate the certificate for the API server to connect to kubelet
  /front-proxy-ca               Generate the self-signed CA to provision identities for front proxy
  /front-proxy-client           Generate the certificate for the front proxy client
  /etcd-ca                      Generate the self-signed CA to provision identities for etcd
  /etcd-server                  Generate the certificate for serving etcd
  /etcd-peer                    Generate the certificate for etcd nodes to communicate with each other
  /etcd-healthcheck-client      Generate the certificate for liveness probes to healthcheck etcd
  /apiserver-etcd-client        Generate the certificate the apiserver uses to access etcd
  /sa                           Generate a private key for signing service account tokens along with its public key
kubeconfig                    Generate all kubeconfig files necessary to establish the control plane and the admin kubeconfig file
  /admin                        Generate a kubeconfig file for the admin to use and for kubeadm itself
  /super-admin                  Generate a kubeconfig file for the super-admin
  /kubelet                      Generate a kubeconfig file for the kubelet to use *only* for cluster bootstrapping purposes
  /controller-manager           Generate a kubeconfig file for the controller manager to use
  /scheduler                    Generate a kubeconfig file for the scheduler to use
etcd                          Generate static Pod manifest file for local etcd
  /local                        Generate the static Pod manifest file for a local, single-node local etcd instance
control-plane                 Generate all static Pod manifest files necessary to establish the control plane
  /apiserver                    Generates the kube-apiserver static Pod manifest
  /controller-manager           Generates the kube-controller-manager static Pod manifest
  /scheduler                    Generates the kube-scheduler static Pod manifest
kubelet-start                 Write kubelet settings and (re)start the kubelet
upload-config                 Upload the kubeadm and kubelet configuration to a ConfigMap
  /kubeadm                      Upload the kubeadm ClusterConfiguration to a ConfigMap
  /kubelet                      Upload the kubelet component config to a ConfigMap
upload-certs                  Upload certificates to kubeadm-certs
mark-control-plane            Mark a node as a control-plane
bootstrap-token               Generates bootstrap tokens used to join a node to a cluster
kubelet-finalize              Updates settings relevant to the kubelet after TLS bootstrap
  /enable-client-cert-rotation  Enable kubelet client certificate rotation
addon                         Install required addons for passing conformance tests
  /coredns                      Install the CoreDNS addon to a Kubernetes cluster
  /kube-proxy                   Install the kube-proxy addon to a Kubernetes cluster
show-join-command             Show the join command for control-plane and worker node
</code></pre><p>Several commands are returned at the end of the installation process, which you&rsquo;ll use in the next part.</p><p><div class=md__image><img id="[310 145 454 203 302 5]" src=step-2.png onclick=openModal(this.id) alt=step-2 class=md-image-responsive></div></p><h2 id=retrieving-kubeconfig-file class=heading-link>Retrieving kubeconfig file
<a href=#retrieving-kubeconfig-file class=heading-anchor aria-label="Permalink to this heading">🔗</a></h2><hr><p>The first set of commands returned during the initialization step allows configuring kubectl for the current user. Run those commands from a shell in the controlplane Node.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir -p <span class=nv>$HOME</span>/.kube
</span></span><span class=line><span class=cl>sudo cp -i /etc/kubernetes/admin.conf <span class=nv>$HOME</span>/.kube/config
</span></span><span class=line><span class=cl>sudo chown <span class=k>$(</span>id -u<span class=k>)</span>:<span class=k>$(</span>id -g<span class=k>)</span> <span class=nv>$HOME</span>/.kube/config
</span></span></code></pre></div><p>You can now list the Nodes. You&rsquo;ll get only one Node as you&rsquo;ve not added the worker Nodes yet.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ kubectl get no
</span></span><span class=line><span class=cl>NAME           STATUS     ROLES           AGE    VERSION
</span></span><span class=line><span class=cl>controlplane   NotReady   control-plane   5m4s   v1.32.4
</span></span></code></pre></div><h2 id=adding-the-first-worker-node class=heading-link>Adding the first worker Node
<a href=#adding-the-first-worker-node class=heading-anchor aria-label="Permalink to this heading">🔗</a></h2><hr><p>As you&rsquo;ve done for the controlplane, use the following command to install the dependencies (kubectl, containerd, kubeadm) on worker1.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl https://luc.run/kubeadm/worker.sh <span class=p>|</span> <span class=nv>VERSION</span><span class=o>=</span><span class=s2>&#34;1.32&#34;</span> sh
</span></span></code></pre></div><p>Then, run the join command returned during the initialization step. This command allows you to add worker nodes to the cluster.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo kubeadm join 10.81.0.174:6443 --token kolibl.0oieughn4y03zvm7 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>        --discovery-token-ca-cert-hash sha256:a1d26efca219428731be6b62e3298a2e5014d829e51185e804f2f614b70d933d
</span></span></code></pre></div><h2 id=adding-the-second-worker-node class=heading-link>Adding the second worker Node
<a href=#adding-the-second-worker-node class=heading-anchor aria-label="Permalink to this heading">🔗</a></h2><hr><p>You need to do the same on worker2. First, install the dependencies.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl https://luc.run/kubeadm/worker.sh <span class=p>|</span> <span class=nv>VERSION</span><span class=o>=</span><span class=s2>&#34;1.32&#34;</span> sh
</span></span></code></pre></div><p>Then, run the join command to add this Node to the cluster.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo kubeadm join 10.81.0.174:6443 --token kolibl.0oieughn4y03zvm7 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>        --discovery-token-ca-cert-hash sha256:a1d26efca219428731be6b62e3298a2e5014d829e51185e804f2f614b70d933d
</span></span></code></pre></div><p>You now have cluster with 3 Nodes.</p><p><div class=md__image><img id="[7 105 266 252 101 68]" src=step-3.png onclick=openModal(this.id) alt=step-3 class=md-image-responsive></div></p><h2 id=status-of-the-nodes class=heading-link>Status of the Nodes
<a href=#status-of-the-nodes class=heading-anchor aria-label="Permalink to this heading">🔗</a></h2><hr><p>List the Nodes and notice they are all in NotReady status.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ kubectl get nodes
</span></span><span class=line><span class=cl>NAME            STATUS     ROLES           AGE     VERSION
</span></span><span class=line><span class=cl>controlplane    NotReady   control-plane   9m58s   v1.32.4
</span></span><span class=line><span class=cl>worker1         NotReady   &lt;none&gt;          58s     v1.32.4
</span></span><span class=line><span class=cl>worker2         NotReady   &lt;none&gt;          55s     v1.32.4
</span></span></code></pre></div><p>If you go one step further and describe the controlplane Node, you&rsquo;ll get why the cluster is not ready yet.</p><pre tabindex=0><code>…
KubeletNotReady              container runtime network not ready: NetworkReady=false reason:NetworkPluginNotReady message:Network plugin returns error: cni plugin not initialized
</code></pre><h2 id=installing-a-network-plugin class=heading-link>Installing a network plugin
<a href=#installing-a-network-plugin class=heading-anchor aria-label="Permalink to this heading">🔗</a></h2><hr><p>Run the following commands from the controlplane Node to install Cilium in your cluster.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>OS</span><span class=o>=</span><span class=s2>&#34;</span><span class=k>$(</span>uname <span class=p>|</span> tr <span class=s1>&#39;[:upper:]&#39;</span> <span class=s1>&#39;[:lower:]&#39;</span><span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>ARCH</span><span class=o>=</span><span class=s2>&#34;</span><span class=k>$(</span>uname -m <span class=p>|</span> sed -e <span class=s1>&#39;s/x86_64/amd64/&#39;</span> -e <span class=s1>&#39;s/\(arm\)\(64\)\?.*/\1\2/&#39;</span> -e <span class=s1>&#39;s/aarch64$/arm64/&#39;</span><span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>curl -L --remote-name-all https://github.com/cilium/cilium-cli/releases/latest/download/cilium-<span class=nv>$OS</span>-<span class=nv>$ARCH</span>.tar.gz<span class=o>{</span>,.sha256sum<span class=o>}</span>
</span></span><span class=line><span class=cl>sudo tar xzvfC cilium-<span class=nv>$OS</span>-<span class=nv>$ARCH</span>.tar.gz /usr/local/bin
</span></span><span class=line><span class=cl>cilium install
</span></span></code></pre></div><p>After a few tens of seconds, you&rsquo;ll see your cluster is ready.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ kubectl get nodes
</span></span><span class=line><span class=cl>NAME            STATUS   ROLES           AGE     VERSION
</span></span><span class=line><span class=cl>controlplane    Ready    control-plane   13m     v1.32.4
</span></span><span class=line><span class=cl>worker1         Ready    &lt;none&gt;          4m28s   v1.32.4
</span></span><span class=line><span class=cl>worker2         Ready    &lt;none&gt;          4m25s   v1.32.4
</span></span></code></pre></div><h2 id=get-the-kubeconfig-on-the-host-machine class=heading-link>Get the kubeconfig on the host machine
<a href=#get-the-kubeconfig-on-the-host-machine class=heading-anchor aria-label="Permalink to this heading">🔗</a></h2><hr><p>To avoid connecting to the controlplane Node to run the kubectl commands, copy the kubeconfig file from the controlplane to the host machine. Make sure to copy this file into <code>$HOME/.kube/config</code> so it automatically configures kubectl.</p><p>If you&rsquo;ve created your VMs with Multipass, you can copy the kubeconfig file using the following commands.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>multipass transfer controlplane:/home/ubuntu/.kube/config config
</span></span><span class=line><span class=cl>mkdir <span class=nv>$HOME</span>/.kube
</span></span><span class=line><span class=cl>mv config <span class=nv>$HOME</span>/.kube/config
</span></span></code></pre></div><p>You should now be able to direcly list the Nodes from the host machine.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ kubectl get nodes
</span></span><span class=line><span class=cl>NAME            STATUS   ROLES           AGE     VERSION
</span></span><span class=line><span class=cl>controlplane    Ready    control-plane   13m     v1.32.4
</span></span><span class=line><span class=cl>worker1         Ready    &lt;none&gt;          4m28s   v1.32.4
</span></span><span class=line><span class=cl>worker2         Ready    &lt;none&gt;          4m25s   v1.32.4
</span></span></code></pre></div><div class=section-index></div><nav class="pagination-nav mt-5" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/certifications/><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label><i class="fa fa-chevron-left"></i> Certifications</div></a><a class="pagination-nav__link pagination-nav__link--next" href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/workload/><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Workloads <i class="fa fa-chevron-right"></i></div></a></nav></div></main></div></div></div><script src=https://cloud.layer5.io/academy/js/main.min.93a3bf75eba7f67cb62933bdc16aff4dc235ec3930d0090a0bdf2a9941f29237.js integrity="sha256-k6O/deun9ny2KTO9wWr/TcI17Dkw0AkKC98qmUHykjc=" crossorigin=anonymous></script><script defer src=https://cloud.layer5.io/academy/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=https://cloud.layer5.io/academy/js/tabpane-persist.js></script><div id=myModal class=modal><button class=modal-close onclick=closeModal()>close</button><div class=modal-cont><img class=modal-pic id=modalPic onclick=closeModal() style=max-width:100%;max-height:80vh;margin:auto alt=Modal-pic></div></div><script>function openModal(e){var t;typeof e=="string"?t=document.getElementById(e).src:e instanceof HTMLImageElement&&(t=e.src),t&&t.includes("#")&&(t=t.substring(0,t.indexOf("#"))),document.getElementById("modalPic").src=t,document.getElementById("myModal").style.display="block"}function closeModal(){document.getElementById("modalPic").src="",document.getElementById("myModal").style.display="none"}document.addEventListener("keydown",function(e){e.key==="Escape"&&closeModal()}),document.addEventListener("DOMContentLoaded",function(){var e,t=document.querySelectorAll("img");t.forEach(function(e){e.onclick=function(){e.dataset.modal!=="false"&&openModal(e)}}),e=document.getElementById("myModal"),e.addEventListener("click",function(){closeModal()})})</script></body></html>