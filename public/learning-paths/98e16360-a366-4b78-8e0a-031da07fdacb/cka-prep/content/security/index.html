<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=alternate type=application/json href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/security/index.json><meta name=robots content="index, follow"><link rel="shortcut icon" href=https://cloud.layer5.io/academy/favicons/favicon.ico><link rel=apple-touch-icon href=https://cloud.layer5.io/academy/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=https://cloud.layer5.io/academy/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=https://cloud.layer5.io/academy/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://cloud.layer5.io/academy/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=https://cloud.layer5.io/academy/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=https://cloud.layer5.io/academy/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=https://cloud.layer5.io/academy/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=https://cloud.layer5.io/academy/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=https://cloud.layer5.io/academy/favicons/android-192x192.png sizes=192x192><title>Security | Layer5 Academy</title><meta name=description content="Create Network Policies and RBAC rules."><meta property="og:url" content="https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/security/"><meta property="og:site_name" content="Layer5 Academy"><meta property="og:title" content="Security"><meta property="og:description" content="Create Network Policies and RBAC rules."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Security"><meta itemprop=description content="Create Network Policies and RBAC rules."><meta itemprop=wordCount content="1392"><meta name=twitter:card content="summary"><meta name=twitter:title content="Security"><meta name=twitter:description content="Create Network Policies and RBAC rules."><link rel=preload href=https://cloud.layer5.io/academy/scss/main.min.8d61368d36274adb6675933a7937cfa090b823abdb581eede811dfeab0c3628e.css as=style integrity="sha256-jWE2jTYnSttmdZM6eTfPoJC4I6vbWB7t6BHf6rDDYo4=" crossorigin=anonymous><link href=https://cloud.layer5.io/academy/scss/main.min.8d61368d36274adb6675933a7937cfa090b823abdb581eede811dfeab0c3628e.css rel=stylesheet integrity="sha256-jWE2jTYnSttmdZM6eTfPoJC4I6vbWB7t6BHf6rDDYo4=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-section><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="form-control td-search__input" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=https://cloud.layer5.io/academy/offline-search-index.f16c09dddb81ca89db2c4b5cb89e7f49.json data-offline-search-base-href=https://cloud.layer5.io/academy/ data-offline-search-max-results=10></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prep-li><a href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prep><span>Certified Kubernetes Administrator (CKA) Preparation</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentcertifications-li><a href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/certifications/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentcertifications><span>Certifications</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentcreation-li><a href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/creation/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentcreation><span>Create a cluster</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentworkload-li><a href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/workload/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentworkload><span>Workloads</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentscheduling-li><a href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/scheduling/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentscheduling><span>Scheduling Pods</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentnetworking-li><a href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/networking/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentnetworking><span>Networking</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentstorage-li><a href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/storage/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentstorage><span>Storage</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentsecurity-li><a href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/security/ class="align-left ps-0 active td-sidebar-link td-sidebar-link__section" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentsecurity><span class=td-sidebar-nav-active-item>Security</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontenttroubleshooting-li><a href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/troubleshooting/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontenttroubleshooting><span>Troubleshooting</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentoperations-li><a href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/operations/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-learning-paths98e16360-a366-4b78-8e0a-031da07fdacbcka-prepcontentoperations><span>Operations</span></a></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"></div></aside><main class="col-12 col-md-9 col-xl-8" role=main><div class="page-header d-flex justify-content-between align-items-center"><div class=breadcrumb-container><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=https://cloud.layer5.io/academy/learning-paths/>Learning Paths</a></li><li class=breadcrumb-item><a href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/>Certified Kubernetes Administrator (CKA) Preparation</a></li><li class="breadcrumb-item active" aria-current=page>Security</li></ol></nav></div></div><div class=td-content><h1>Security</h1><div class=lead>Create Network Policies and RBAC rules.</div><header class=article-meta><p class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>&nbsp; 7 minute read &nbsp;</p></header><p>This section is a refresher that provides an overview of the main concepts of security in Kubernetes. At the end of this section, please complete the exercises to put these concepts into practice.</p><h2 id=authentication--authorization class=heading-link>Authentication & Authorization
<a href=#authentication--authorization class=heading-anchor aria-label="Permalink to this heading">🔗</a></h2><hr><p><div class=md__image><img id="[495 304 206 355 263 308]" src=rbac.png onclick=openModal(this.id) alt=rbac class=md-image-responsive></div></p><h3 id=authentication-several-methods class=heading-link>Authentication: several methods
<a href=#authentication-several-methods class=heading-anchor aria-label="Permalink to this heading">🔗</a></h3><p>Kubernetes offers multiple methods to authenticate users against the API Server:</p><ul><li>Client certificates</li><li>Bearer tokens</li><li>HTTP basic auth</li><li>OpenID Connect</li><li>Proxy</li></ul><p>To authenticate an application running in a Pod, Kubernetes relies on ServiceAccounts resources.</p><h3 id=authentication-admin-kubeconfig class=heading-link>Authentication: admin kubeconfig
<a href=#authentication-admin-kubeconfig class=heading-anchor aria-label="Permalink to this heading">🔗</a></h3><p>When we create a cluster, an admin kubeconfig file is generated, similar to the following one.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>clusters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>cluster</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>certificate-authority-data</span><span class=p>:</span><span class=w> </span><span class=l>LS0tLS1CR…0tLS0tCg==</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>server</span><span class=p>:</span><span class=w> </span><span class=l>https://10.55.133.216:6443</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>kubernetes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>contexts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>context</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>cluster</span><span class=p>:</span><span class=w> </span><span class=l>kubernetes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class=l>kubernetes-admin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>kubernetes-admin@kubernetes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>current-context</span><span class=p>:</span><span class=w> </span><span class=l>kubernetes-admin@kubernetes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>preferences</span><span class=p>:</span><span class=w> </span>{}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>users</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>kubernetes-admin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>user</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>client-certificate-data</span><span class=p>:</span><span class=w> </span><span class=l>LS0tLS1CRU...0tLS0tCg==</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>client-key-data</span><span class=p>:</span><span class=w> </span><span class=l>LS0tLS1CRU...0tLS0tCg==</span><span class=w>
</span></span></span></code></pre></div><p>This file contains a public/private key pair used for authentication against the API Server. We can use OpenSSL commands to get details about the public key (x509 certificate).</p><p><div class=md__image><img id="[242 77 21 254 417 143]" src=certificate.png onclick=openModal(this.id) alt=certificate class=md-image-responsive></div></p><p>The following screenshot shows the Subject used in the certificate:</p><ul><li><strong>&ldquo;O = system:master&rdquo;</strong> indicates this certificate is related to the system:master group</li><li><strong>&ldquo;CN= kubernetes-admin&rdquo;</strong> indicates it is related to the kubernetes-admin user</li></ul><p>Using this certificate to communicate with the API Server will authenticate us as the kubernetes-admin belonging to the system:master group. This is a specific case, as the group system:master provides full access to the cluster.</p><p>The admin kubeconfig file is not the only kubeconfig file generated during the cluster creation step. As we&rsquo;ll see in the next section, each component that needs to communicate with the API Server has its kubeconfig file (and associated access rights).</p><h3 id=authentication-control-plane-components class=heading-link>Authentication: control-plane components
<a href=#authentication-control-plane-components class=heading-anchor aria-label="Permalink to this heading">🔗</a></h3><p>The following picture illustrates how the control plane components communicate with each other.</p><p><div class=md__image><img id="[224 407 246 409 150 160]" src=control-plane.png onclick=openModal(this.id) alt=control-plane class=md-image-responsive></div></p><p>The /etc/kubernetes folder contains the following files to ensure this communication is secured.</p><ul><li>kubeconfig files to authenticate internal components against the API Server</li><li>Certificates and private keys to ensure communication is using TLS; they are located in /etc/kubernetes/pki</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo tree /etc/kubernetes
</span></span><span class=line><span class=cl>/etc/kubernetes
</span></span><span class=line><span class=cl>├── admin.conf
</span></span><span class=line><span class=cl>├── controller-manager.conf
</span></span><span class=line><span class=cl>├── kubelet.conf
</span></span><span class=line><span class=cl>├── manifests
</span></span><span class=line><span class=cl>│   ├── etcd.yaml
</span></span><span class=line><span class=cl>│   ├── kube-apiserver.yaml
</span></span><span class=line><span class=cl>│   ├── kube-controller-manager.yaml
</span></span><span class=line><span class=cl>│   └── kube-scheduler.yaml
</span></span><span class=line><span class=cl>├── pki
</span></span><span class=line><span class=cl>│   ├── apiserver-etcd-client.crt
</span></span><span class=line><span class=cl>│   ├── apiserver-etcd-client.key
</span></span><span class=line><span class=cl>│   ├── apiserver-kubelet-client.crt
</span></span><span class=line><span class=cl>│   ├── apiserver-kubelet-client.key
</span></span><span class=line><span class=cl>│   ├── apiserver.crt
</span></span><span class=line><span class=cl>│   ├── apiserver.key
</span></span><span class=line><span class=cl>│   ├── ca.crt
</span></span><span class=line><span class=cl>│   ├── ca.key
</span></span><span class=line><span class=cl>│   ├── etcd
</span></span><span class=line><span class=cl>│   │   ├── ca.crt
</span></span><span class=line><span class=cl>│   │   ├── ca.key
</span></span><span class=line><span class=cl>│   │   ├── healthcheck-client.crt
</span></span><span class=line><span class=cl>│   │   ├── healthcheck-client.key
</span></span><span class=line><span class=cl>│   │   ├── peer.crt
</span></span><span class=line><span class=cl>│   │   ├── peer.key
</span></span><span class=line><span class=cl>│   │   ├── server.crt
</span></span><span class=line><span class=cl>│   │   └── server.key
</span></span><span class=line><span class=cl>│   ├── front-proxy-ca.crt
</span></span><span class=line><span class=cl>│   ├── front-proxy-ca.key
</span></span><span class=line><span class=cl>│   ├── front-proxy-client.crt
</span></span><span class=line><span class=cl>│   ├── front-proxy-client.key
</span></span><span class=line><span class=cl>│   ├── sa.key
</span></span><span class=line><span class=cl>│   └── sa.pub
</span></span><span class=line><span class=cl>├── scheduler.conf
</span></span><span class=line><span class=cl>└── super-admin.conf
</span></span></code></pre></div><p>For information purposes, the following table gives the subject of the certificates embedded in each kubeconfig file.</p><table><thead><tr><th>file</th><th>subject</th></tr></thead><tbody><tr><td>admin.conf</td><td>O = system:masters, CN=kubernetes-admin</td></tr><tr><td>super-admin.conf</td><td>O = system:masters, CN = kubernetes-super-admin</td></tr><tr><td>controller-manager.conf</td><td>CN = system:kube-controller-manager</td></tr><tr><td>kubelet.conf</td><td>O = system:nodes, CN = system:node:NODE_NAME</td></tr><tr><td>scheduler.conf</td><td>CN = system:kube-scheduler</td></tr></tbody></table><h3 id=authentication-serviceaccount class=heading-link>Authentication: ServiceAccount
<a href=#authentication-serviceaccount class=heading-anchor aria-label="Permalink to this heading">🔗</a></h3><p>When a Pod needs to access the API Server, it must use a resource of type ServiceAccount. The following YAML specification defines a ServiceAccount named viewer.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>ServiceAccount</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>viewer</span><span class=w>
</span></span></span></code></pre></div><p>We can manually create a token for this ServiceAccount.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl create token viewer
</span></span></code></pre></div><p>This command returns a token similar to the following one:</p><pre tabindex=0><code>eyJhbGciOiJSUzI1NiIsImtpZCI6IlRwSU85ZXdWUFp0SlpjaDBjekl6ZTNaNGRuUTZSVDFiV2dyWVhqbGwyRDAifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiXSwiZXhwIjoxNzQ1NDk5OTUyLCJpYXQiOjE3NDU0OTYzNTIsImlzcyI6Imh0dHBzOi8va3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsIiwianRpIjoiMTE1OTgzZjYtOWE3Ny00ZmY1LWE4OGQtMTc2ODg3N2YxYmE3Iiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJkZWZhdWx0Iiwic2VydmljZWFjY291bnQiOnsibmFtZSI6InZpZXdlciIsInVpZCI6IjY2NmE3NWNkLWRkZGUtNDAzYi1iZmE0LWM0MjIxNWI1OTA1YiJ9fSwibmJmIjoxNzQ1NDk2MzUyLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6ZGVmYXVsdDp2aWV3ZXIifQ.CGYbqWDj3KaEGPgU_pV6sL1wRf3IU56AlpljLxUO6tvpbkK7Z6le8FI5zdwp_04LgcWnHLo5-hsZiyJxmeKYXhsb3CASkI0Vvumfsb8kahIiJxVXIE-PfzKNlxampuubc3mG4q9h1s0M_Y-PubMdl4TkBoLMjujxbsTtPqpD2joxyZ2YB7ys7DiGp-BjQwXwwaxOniSwd0l_tyEAlX0UTy0qjmjjuMBJKQTLDzwPJXWCAXbeAMULsnsosS21sWyimmVMz6HQ8S4MttkMSg8eZ1IW-LPPn3Hfs0lBLRYeVRBn6qe4l7qxgCfgj57GfYgEWGy5BO9uaAAGcHVBdTacAQ
</code></pre><p>From <a href=https://jwt.io>jwt.io</a> we can get the content of this JWT token and see that it authenticates the ServiceAccount named viewer within the default Namespace. We could use this token manually to call the API Server, but when a Pod is using a ServiceAccount a dedicated token is automatically created and mounted into its containers&rsquo; filesystem.</p><p><div class=md__image><img id="[422 183 185 34 78 417]" src=jwt.png onclick=openModal(this.id) alt=jwt class=md-image-responsive></div></p><h2 id=authorization-rbac-role-based-access-control class=heading-link>Authorization: RBAC (Role Based Access Control)
<a href=#authorization-rbac-role-based-access-control class=heading-anchor aria-label="Permalink to this heading">🔗</a></h2><hr><p>In the previous section, we covered the authentication mechanisms that allow the API Server to verify a user&rsquo;s or an application&rsquo;s identity. Now, we&rsquo;ll look at the resources used to grant permissions.</p><p><div class=md__image><img id="[164 132 436 30 181 236]" src=rbac-resources.png onclick=openModal(this.id) alt=rbac-resources class=md-image-responsive></div></p><h3 id=authorization-role--rolebinding class=heading-link>Authorization: Role / RoleBinding
<a href=#authorization-role--rolebinding class=heading-anchor aria-label="Permalink to this heading">🔗</a></h3><p>A Role resource defines permissions in a Namespace. A RoleBinding associates this Role with an identity which can be a user, a group, or a ServiceAccount.</p><p>The following example defines a Role that grants read-only access to Pods in the development Namespace. The RoleBinding associates this Role with a user named bob: if a user has a certificate whose subject is bob, then he will be granted the permission to list and get information about Pods in the development Namespace.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>rbac.authorization.k8s.io/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Role</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>development</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>dev-pod-reader</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>apiGroups</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resources</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;pods&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>verbs</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;get&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;list&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>rbac.authorization.k8s.io/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>RoleBinding</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>dev-pod-reader</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>development</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>subjects</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>User</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>bob</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>apiGroup</span><span class=p>:</span><span class=w> </span><span class=l>rbac.authorization.k8s.io</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>roleRef</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Role</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>dev-pod-reader</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>apiGroup</span><span class=p>:</span><span class=w> </span><span class=l>rbac.authorization.k8s.io</span><span class=w>
</span></span></span></code></pre></div><h3 id=authorization-clusterrole--clusterrolebinding class=heading-link>Authorization: ClusterRole / ClusterRoleBinding
<a href=#authorization-clusterrole--clusterrolebinding class=heading-anchor aria-label="Permalink to this heading">🔗</a></h3><p>The ClusterRole and ClusterRoleBinding resources are similar to the Role and RoleBinding ones, except that they are global to the cluster instead of being limited to a Namespace.</p><p>The following specifications define a ClusterRole which grants read access to resources of type Secret in the entire cluster and a ClusterRoleBinding that associates this ClusterRole to the ServiceAccount named viewer. If a Pod uses the viewer ServiceAccount, then its containers will have the right to read the cluster&rsquo;s Secrets.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>rbac.authorization.k8s.io/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>ClusterRole</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>secret-reader</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>apiGroups</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resources</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;secrets&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>verbs</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;get&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;list&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>rbac.authorization.k8s.io/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>ClusterRoleBinding</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>dev-pod-reader</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>subjects</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>ServiceAccount</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>viewer</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>apiGroup</span><span class=p>:</span><span class=w> </span><span class=l>rbac.authorization.k8s.io</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>roleRef</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>ClusterRole</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>secret-reader</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>apiGroup</span><span class=p>:</span><span class=w> </span><span class=l>rbac.authorization.k8s.io</span><span class=w>
</span></span></span></code></pre></div><h3 id=authorization-usage-of-a-serviceaccount class=heading-link>Authorization: usage of a ServiceAccount
<a href=#authorization-usage-of-a-serviceaccount class=heading-anchor aria-label="Permalink to this heading">🔗</a></h3><p>To use a ServiceAccount, we can define the serviceAccountName property in the Pod&rsquo;s specification as follows.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>monitoring</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>lucj/mon:1.2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>mon</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>serviceAccountName</span><span class=p>:</span><span class=w> </span><span class=l>viewer</span><span class=w>
</span></span></span></code></pre></div><h2 id=securitycontext class=heading-link>SecurityContext
<a href=#securitycontext class=heading-anchor aria-label="Permalink to this heading">🔗</a></h2><hr><p>The SecurityContext property defines privileges and access controls at the Pod or container level.</p><p>When defined at the <strong>Pod level</strong>, we can use the following properties:</p><ul><li><strong>fsGroup</strong>: specifies a group ID that all containers in the Pod use for accessing mounted volumes</li><li><strong>runAsGroup</strong>: sets the primary group ID for all container processes</li><li><strong>runAsNonRoot</strong>: ensures that containers must run as a non-root user</li><li><strong>runAsUser</strong>: sets the user ID to run all processes in the Pod</li><li><strong>seLinuxOptions</strong>: defines SELinux labels to apply to the Pod</li><li><strong>supplementalGroups</strong>: specifies additional group IDs for processes in the Pod</li><li><strong>sysctls</strong>: allows setting kernel parameters (sysctls) for the Pod</li></ul><p>When defined at the <strong>container level</strong>, we can use the following properties:</p><ul><li><strong>allowPrivilegeEscalation</strong>: indicates whether a process can gain more privileges than its parent</li><li><strong>capabilities</strong>: adds or removes Linux capabilities for the container process</li><li><strong>privileged</strong>: grants the container full access to the host</li><li><strong>procMount</strong>: controls how /proc is mounted in the container</li><li><strong>readOnlyRootFilesystem</strong>: if set to true, makes the container&rsquo;s root filesystem read-only</li><li><strong>runAsGroup</strong>: sets the primary group ID for the container process</li><li><strong>runAsNonRoot</strong>: ensures the container runs as a non-root user</li><li><strong>runAsUser</strong>: sets the user ID to run the container process</li><li><strong>seLinuxOptions</strong>: applies SELinux labels to the container</li></ul><h3 id=example class=heading-link>Example
<a href=#example class=heading-anchor aria-label="Permalink to this heading">🔗</a></h3><p>The following Pod specification defines a securityContext property both at the Pod and at the container level.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>demo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>securityContext</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runAsUser</span><span class=p>:</span><span class=w> </span><span class=m>1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runAsGroup</span><span class=p>:</span><span class=w> </span><span class=m>3000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>fsGroup</span><span class=p>:</span><span class=w> </span><span class=m>2000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>api</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>registry.gitlab.com/web-hook/api:v1.0.39</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>securityContext</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>allowPrivilegeEscalation</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>readOnlyRootFilesystem</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>runAsUser</span><span class=p>:</span><span class=w> </span><span class=m>10000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>runAsNonRoot</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>seccompProfile</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>RuntimeDefault</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>capabilities</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>drop</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>ALL</span><span class=w>
</span></span></span></code></pre></div><h2 id=network-policy class=heading-link>Network Policy
<a href=#network-policy class=heading-anchor aria-label="Permalink to this heading">🔗</a></h2><hr><p>By default, Pods created in separate Namespaces can communicate with each other. To control Pod-to-Pod communications, Kubernetes has a NetworkPolicy resource. Based on Pod&rsquo;s labels, it can restrict ingress and egress communication for the selected Pods.</p><p>The example below defines a NetworkPolicy restricting the database Pod to receive traffic from the backend Pod only.</p><p><div class=md__image><img id="[81 330 466 163 358 224]" src=netpol.png onclick=openModal(this.id) alt=netpol class=md-image-responsive></div></p><p>The example below (from Kubernetes documentation) is more complex. It illustrates the full capabilities of NetworkPolicies.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>networking.k8s.io/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>NetworkPolicy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>test-network-policy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>default</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>podSelector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>role</span><span class=p>:</span><span class=w> </span><span class=l>db</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>policyTypes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>Ingress</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>Egress</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ingress</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>from</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>ipBlock</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>cidr</span><span class=p>:</span><span class=w> </span><span class=m>172.17.0.0</span><span class=l>/16</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>except</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=m>172.17.1.0</span><span class=l>/24</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>namespaceSelector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>project</span><span class=p>:</span><span class=w> </span><span class=l>myproject</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>podSelector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>role</span><span class=p>:</span><span class=w> </span><span class=l>frontend</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class=l>TCP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>6379</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>egress</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>to</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>ipBlock</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>cidr</span><span class=p>:</span><span class=w> </span><span class=m>10.0.0.0</span><span class=l>/24</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class=l>TCP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>5978</span><span class=w>
</span></span></span></code></pre></div><p>It defines a NetworkPolicy for Pods with the label <code>role: db</code> managing incoming and outgoing traffic for those Pods.</p><p>It authorizes <strong>incoming traffic from</strong> (logical OR):</p><ul><li>Pods with IP addresses in a specific range</li><li>Pods within a namespace</li><li>Pods with specific labels in the current namespace</li></ul><p>It also authorizes <strong>outgoing traffic to</strong> (logical OR):</p><ul><li>Pods with IP addresses in a specific range</li><li>Pods within a specific namespace</li><li>Pods with specific labels in the current namespace</li></ul><p>Both incoming and outgoing traffic are limited to specific ports.</p><div class=section-index></div><nav class="pagination-nav mt-5" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/storage/><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label><i class="fa fa-chevron-left"></i> Storage</div></a><a class="pagination-nav__link pagination-nav__link--next" href=https://cloud.layer5.io/academy/learning-paths/98e16360-a366-4b78-8e0a-031da07fdacb/cka-prep/content/troubleshooting/><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Troubleshooting <i class="fa fa-chevron-right"></i></div></a></nav></div></main></div></div></div><script src=https://cloud.layer5.io/academy/js/main.min.93a3bf75eba7f67cb62933bdc16aff4dc235ec3930d0090a0bdf2a9941f29237.js integrity="sha256-k6O/deun9ny2KTO9wWr/TcI17Dkw0AkKC98qmUHykjc=" crossorigin=anonymous></script><script defer src=https://cloud.layer5.io/academy/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=https://cloud.layer5.io/academy/js/tabpane-persist.js></script><div id=myModal class=modal><button class=modal-close onclick=closeModal()>close</button><div class=modal-cont><img class=modal-pic id=modalPic onclick=closeModal() style=max-width:100%;max-height:80vh;margin:auto alt=Modal-pic></div></div><script>function openModal(e){var t;typeof e=="string"?t=document.getElementById(e).src:e instanceof HTMLImageElement&&(t=e.src),t&&t.includes("#")&&(t=t.substring(0,t.indexOf("#"))),document.getElementById("modalPic").src=t,document.getElementById("myModal").style.display="block"}function closeModal(){document.getElementById("modalPic").src="",document.getElementById("myModal").style.display="none"}document.addEventListener("keydown",function(e){e.key==="Escape"&&closeModal()}),document.addEventListener("DOMContentLoaded",function(){var e,t=document.querySelectorAll("img");t.forEach(function(e){e.onclick=function(){e.dataset.modal!=="false"&&openModal(e)}}),e=document.getElementById("myModal"),e.addEventListener("click",function(){closeModal()})})</script></body></html>